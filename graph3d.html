<html>
<body style="background-color: grey;">
<svg id="graph" height="800" width="800">
</svg>
<script>
(function() {
	var gragh = document.getElementById("graph")

	function toY(y) {
		return 300 - y;
	}

	function fromX(x) {
		var drop = -Math.PI / 36;
		return { x: x * Math.cos(drop), y: x * Math.sin(drop) };
	}

	function fromZ(z) {
		var lift = Math.PI / 9;
		return { x: z * Math.cos(lift), y: z * Math.sin(lift) };
	}

	function pointAt(x, y, z, colour) {
		var point = document.createElementNS("http://www.w3.org/2000/svg", "circle"),
			transX = fromX(x),
			transZ = fromZ(z),
			r = 0.75;

		point.setAttribute("cx", transX.x + transZ.x);
		point.setAttribute("cy", toY(y + transX.y + transZ.y));
		point.setAttribute("r", r);
		point.setAttribute("stroke", colour);
		point.setAttribute("stroke-width", r);
		point.setAttribute("fill", colour);

		graph.appendChild(point);
	}

	
	{
		var xAxis = document.createElementNS("http://www.w3.org/2000/svg", "line");
		

		xAxis.setAttribute("x1", 0);
		xAxis.setAttribute("y1", toY(0));
		xAxis.setAttribute("x2", fromX(300).x);
		xAxis.setAttribute("y2", toY(fromX(300).y));
		xAxis.setAttribute("style", "stroke:rgb(255,0,0);stroke-width:2");

		graph.appendChild(xAxis);
	}

	{
		var yAxis = document.createElementNS("http://www.w3.org/2000/svg", "line");

		yAxis.setAttribute("x1", 0);
		yAxis.setAttribute("y1", toY(0));
		yAxis.setAttribute("x2", 0);
		yAxis.setAttribute("y2", toY(300));
		yAxis.setAttribute("style", "stroke:rgb(0,255,0);stroke-width:2");

		graph.appendChild(yAxis);
	}

	{
		var zAxis = document.createElementNS("http://www.w3.org/2000/svg", "line");

		zAxis.setAttribute("x1", 0);
		zAxis.setAttribute("y1", toY(0));
		zAxis.setAttribute("x2", fromZ(300).x);
		zAxis.setAttribute("y2", toY(fromZ(300).y));
		zAxis.setAttribute("style", "stroke:rgb(0,0,255);stroke-width:2");

		graph.appendChild(zAxis);
	}

	function toColour(v, vMax) {
		return Math.abs(v * 255 / vMax);
	}

	var r = 200;
	var scale = 1.25;
	for (var z = 0; z < r; ++z) {
		for (var x = 0; x < r; ++x) {
			var yp = scale * r * Math.sin(Math.PI * x * 2 / r) * Math.sin(Math.PI * z / r);
			pointAt(scale * x, yp, scale * z, "rgb(" + toColour(x, r * scale) + "," + toColour(0.5 * yp, r * scale) + "," + toColour(z, r * scale) + ")");
		}
	}
})();

</script>
</body>
</html>