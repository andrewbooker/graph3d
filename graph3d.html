<html>
<body style="background-color: grey;">
<svg id="graph" height="800" width="800">
</svg>
<script>
(function() {
	var gragh = document.getElementById("graph")

	function toY(y) {
		return 300 - y;
	}

	function fromX(x) {
		var drop = -Math.PI / 36;
		return { x: x * Math.cos(drop), y: x * Math.sin(drop) };
	}

	function fromZ(z) {
		var lift = Math.PI / 9;
		return { x: z * Math.cos(lift), y: z * Math.sin(lift) };
	}

	function pointAt(x, y, z, colour) {
		var point = document.createElementNS("http://www.w3.org/2000/svg", "circle"),
			transX = fromX(x),
			transZ = fromZ(z),
			r = 0.75;

		point.setAttribute("cx", transX.x + transZ.x);
		point.setAttribute("cy", toY(y + transX.y + transZ.y));
		point.setAttribute("r", r);
		point.setAttribute("stroke", colour);
		point.setAttribute("stroke-width", r);
		point.setAttribute("fill", colour);

		graph.appendChild(point);
	}

	
	function axis(endPoint) {
		var a = document.createElementNS("http://www.w3.org/2000/svg", "line");
		
		a.setAttribute("x1", 0);
		a.setAttribute("y1", toY(0));
		a.setAttribute("x2", endPoint.x);
		a.setAttribute("y2", endPoint.y);
		a.setAttribute("style", "stroke:" + endPoint.colour + ";stroke-width:2");

		graph.appendChild(a);
	}

	axis({ x: fromX(300).x, y: toY(fromX(300).y), colour: "red" });
	axis({ x: 0, y: toY(300), colour: "green" });
	axis({ x: fromZ(300).x, y: toY(fromZ(300).y), colour: "blue" });


	function toColour(v) {
		return Math.abs(v * 255);
	}

	var data = [];
	var r = 200;
	for (var z = 0; z < r; ++z) {
		for (var x = 0; x < r; ++x) {
			data.push({ x: x / r, y: Math.sin(Math.PI * x * 2 / r) * Math.sin(Math.PI * z / r), z: z / r });
		}
	}

	var scale = 1.25;
	data.forEach(function(d) {
		pointAt(scale * r * d.x, scale * r * d.y, scale * r * d.z, "rgb(" + toColour(d.x) + "," + toColour(0.75 * d.y) + "," + toColour(d.z) + ")");
	});


})();

</script>
</body>
</html>